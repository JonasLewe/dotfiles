# ==============================================================================
# TMUX CONFIGURATION
# ==============================================================================
# tmux is a "terminal multiplexer" — it lets you run multiple terminal sessions
# inside a single window. Key concepts:
#
#   Session  → a collection of windows (survives terminal close/disconnect)
#   Window   → a full-screen view within a session (like browser tabs)
#   Pane     → a split within a window (multiple terminals side by side)
#
# WORKFLOW:
#   Ghostty starts tmux automatically → you're always inside tmux.
#   Detach with <prefix>d → tmux keeps running in background.
#   Re-attach with: tmux attach -t default
#
# PREFIX KEY: Ctrl+a  (changed from default Ctrl+b)
# All tmux commands start with the prefix, then another key.
# Example: Ctrl+a, then c  → create a new window

# ==============================================================================
# BASIC SETTINGS
# ==============================================================================

# Enable mouse support: click to select panes, scroll to scroll content,
# drag to resize panes
set -g mouse on

# Number of lines kept in the scrollback buffer per pane
# Use <prefix>[ to enter scroll mode, then vim keys to navigate
set -g history-limit 10000

# Tell tmux what kind of terminal it's running in.
# screen-256color enables 256-color support inside tmux.
set -g default-terminal "screen-256color"

# Pass true color (24-bit RGB) escape codes through to the terminal.
# Required for Neovim themes to display correct colors inside tmux.
set-option -sa terminal-overrides ",xterm-256color:Tc"

# Pass focus events through to applications running inside tmux (e.g. Neovim).
# Required for 'autoread' to work correctly when switching windows.
set-option -g focus-events on

# ==============================================================================
# DEFAULT SHELL
# ==============================================================================
# Use zsh as the default shell for all new panes/windows
set-option -g default-shell /bin/zsh

# ==============================================================================
# PREFIX KEY
# ==============================================================================
# Change prefix from Ctrl+b to Ctrl+a.
# Ctrl+a is more ergonomic (both keys on the left side of keyboard).
# Note: this shadows the "go to beginning of line" readline shortcut.

unbind C-b              # remove default Ctrl+b prefix
set -g prefix C-a       # set new prefix to Ctrl+a
bind C-a send-prefix    # pressing prefix twice sends Ctrl+a to the terminal

# ==============================================================================
# VIM-STYLE NAVIGATION
# ==============================================================================

# Use vi keys in copy mode (scroll, search, select text)
# Press <prefix>[ to enter copy mode, then navigate with hjkl
setw -g mode-keys vi

# SPLIT WINDOWS
# Split into left/right panes (vertical divider)
unbind '"'  # remove default horizontal split binding
unbind %    # remove default vertical split binding
bind | split-window -h -c "#{pane_current_path}"  # | = vertical split, keep cwd
bind - split-window -v -c "#{pane_current_path}"  # - = horizontal split, keep cwd

# CREATE NEW WINDOW
# New windows open in home directory (not current directory)
unbind c
bind c new-window -c ~

# NAVIGATE BETWEEN PANES
# After pressing prefix, use hjkl to move between panes
# (like vim: h=left, j=down, k=up, l=right)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# RESIZE PANES
# After pressing prefix, hold and repeat H/J/K/L to resize
# -r means the key can be repeated without pressing prefix again
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ==============================================================================
# COPY MODE (VIM STYLE)
# ==============================================================================
# Enter copy mode: <prefix>[
# Then navigate with vim keys, select text, and copy.
# Paste with: <prefix>]

bind -T copy-mode-vi v     send -X begin-selection       # v to start selecting
bind -T copy-mode-vi y     send -X copy-selection-and-cancel  # y to copy
bind -T copy-mode-vi Escape send -X cancel               # Escape to cancel

# ==============================================================================
# RELOAD CONFIG
# ==============================================================================
# Apply config changes without restarting tmux.
# Press <prefix>r inside any tmux session.
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# ==============================================================================
# STATUS BAR
# ==============================================================================
# The status bar at the bottom shows session/window info.
# Keeping it minimal — no plugins, just the essentials.

set -g status-style bg=black,fg=white          # black background, white text
set -g status-left "[#S] "                     # show session name on the left
set -g status-right "%H:%M %d-%b-%y"           # show time and date on the right
set -g window-status-current-style bg=blue,fg=white,bold  # highlight active window
